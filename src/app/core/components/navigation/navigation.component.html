<mat-nav-list>
  <ng-container *ngFor="let item of navigationItems">
    <div *ngIf="item.children; else singleItem">
      <mat-list-item class="parent-item" [class.active-parent]="hasActiveChild(item)" (click)="toggleExpansion(item)">
        <mat-icon matListItemIcon>{{item.icon}}</mat-icon>
        <span matListItemTitle>{{item.label}}</span>
        <div matListItemMeta>
          <mat-icon>
            {{item.expanded ? 'expand_less' : 'expand_more'}}
          </mat-icon>
        </div>
      </mat-list-item>

      <div *ngIf="item.expanded" class="children-container">
        <mat-list-item *ngFor="let child of item.children" [routerLink]="child.route"
          [class.active-route]="isActive(child.route)" class="child-item">
          <mat-icon matListItemIcon>{{child.icon}}</mat-icon>
          <span matListItemTitle>{{child.label}}</span>
        </mat-list-item>
      </div>
    </div>

    <ng-template #singleItem>
      <mat-list-item [routerLink]="item.route" [class.active-route]="isActive(item.route)" class="single-item">
        <mat-icon matListItemIcon>{{item.icon}}</mat-icon>
        <span matListItemTitle>{{item.label}}</span>
      </mat-list-item>
    </ng-template>
  </ng-container>
</mat-nav-list>